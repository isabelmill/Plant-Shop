{"version":3,"file":"assets/js/about.afba7196.js","mappings":"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","sources":["webpack://front-end/./src/views/StatsView.vue","webpack://front-end/./src/views/StatsView.vue?67db"],"sourcesContent":["<template>\n  <div class=\"stats\">\n    <div class=\"stats-sales\">\n      <div v-if=\"transactions?.length > 0\" class=\"stat\">\n        <h2>Top 5 Sold Plants</h2>\n        <div class=\"transactions\" v-for=\"plant in topSoldPlants\" :key=\"plant\">\n          <p>{{ plant[0] }}</p>\n          <p>{{ plant[1] }}</p>\n        </div>\n      </div>\n      <div v-if=\"transactions?.length > 0\" class=\"stat\">\n        <h2>Top 5 Unique Plants</h2>\n        <div class=\"transactions\" v-for=\"plant in uniquePlants\" :key=\"plant\">\n          <p>{{ plant[0] }}</p>\n          <p>{{ plant[1] }}</p>\n        </div>\n      </div>\n      <div v-if=\"transactions?.length > 0\" class=\"stat\">\n        <h2>Sales In The Past 5 Days</h2>\n        <div class=\"transactions\" v-for=\"transaction in past5DaysSales\" :key=\"transaction._id\">\n          <p>{{ transaction[0] }}</p>\n          <p>{{ transaction[1] }} $</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StatsView',\n  async created() {\n    await this.$store.dispatch({ type: 'loadTransactions' })\n  },\n  methods: {\n    countProducts(products) {\n      const productCount = {};\n      for (const id of products) {\n        productCount[id] ? productCount[id] += 1 : productCount[id] = 1\n      }\n      return productCount\n    },\n    sortByName(productCount, allProd) {\n      Object.keys(productCount).forEach((key) => {\n        let name = allProd.find((plant) => plant._id === key)\n        let newName = name.title\n        productCount[newName] = productCount[key]\n        delete productCount[key]\n      })\n\n      let sortable = [];\n      for (var product in productCount) {\n        sortable.push([product, productCount[product]]);\n      }\n\n      sortable.sort((a, b) => {\n        return b[1] - a[1];\n      });\n\n      if (sortable.length > 5) sortable = sortable.slice(0, 5)\n      return sortable\n    },\n    filter5days() {\n      let fiveDaysAgo = new Date();\n      fiveDaysAgo.setDate(fiveDaysAgo.getDate() - 5);\n      return this.transactions.filter((transaction) => Date.parse(transaction.date) > Date.parse(fiveDaysAgo))\n    }\n  },\n  computed: {\n    transactions() {\n      return this.$store.getters.transactions\n    },\n    uniquePlants() {\n      let transactions = this.filter5days()\n\n      transactions = transactions.map((transaction) => transaction.productsIds).flat()\n\n      let allProd = []\n      this.transactions.forEach((trns) => {\n        trns.products.forEach((plant) => allProd.push(plant))\n      })\n\n      let productCount = this.countProducts(transactions)\n      let sorted = this.sortByName(productCount, allProd)\n\n      return sorted\n    },\n    topSoldPlants() {\n\n      let allProd = []\n      this.transactions.forEach((trns) => {\n        trns.products.forEach((plant) => allProd.push(plant))\n      })\n      let onlyId = allProd.map((plant) => plant._id)\n\n      let productCount = this.countProducts(onlyId)\n      let sorted = this.sortByName(productCount, allProd)\n\n      return sorted\n    },\n\n    past5DaysSales() {\n\n      let transactions = this.filter5days()\n\n      const totalCount = {};\n      for (const trns of transactions) {\n        totalCount[trns.formattedDate] ? totalCount[trns.formattedDate] += trns.total : totalCount[trns.formattedDate] = trns.total\n      }\n      let array = [];\n      for (var product in totalCount) {\n        array.push([product, totalCount[product]]);\n      }\n\n      return array\n    },\n  }\n}\n</script>\n","import { render } from \"./StatsView.vue?vue&type=template&id=7c2446ea\"\nimport script from \"./StatsView.vue?vue&type=script&lang=js\"\nexport * from \"./StatsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\isabe\\\\OneDrive\\\\Desktop\\\\My-JS\\\\plants-shop\\\\front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","$options","length","_hoisted_4","_Fragment","_renderList","plant","key","_toDisplayString","_hoisted_6","_hoisted_8","transaction","_id","name","async","this","$store","dispatch","type","methods","countProducts","products","productCount","id","sortByName","allProd","Object","keys","forEach","find","newName","title","sortable","product","push","sort","a","b","slice","filter5days","fiveDaysAgo","Date","setDate","getDate","transactions","filter","parse","date","computed","getters","uniquePlants","map","productsIds","flat","trns","sorted","topSoldPlants","onlyId","past5DaysSales","totalCount","formattedDate","total","array","__exports__","render"],"sourceRoot":""}