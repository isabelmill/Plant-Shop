"use strict";(self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[]).push([[443],{5285:function(t,s,a){a.r(s),a.d(s,{default:function(){return y}});var e=a(3396),n=a(7139);const l={class:"stats"},r={class:"stats-sales"},o={key:0,class:"stat"},i=(0,e._)("h2",null,"Top 5 Sold Plants",-1),c={key:1,class:"stat"},u=(0,e._)("h2",null,"Top 5 Unique Plants",-1),d={key:2,class:"stat"},h=(0,e._)("h2",null,"Sales In The Past 5 Days",-1);function p(t,s,a,p,f,w){return(0,e.wg)(),(0,e.iD)("div",l,[(0,e._)("div",r,[w.transactions?.length>0?((0,e.wg)(),(0,e.iD)("div",o,[i,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.topSoldPlants,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"transactions",key:t},[(0,e._)("p",null,(0,n.zw)(t[0]),1),(0,e._)("p",null,(0,n.zw)(t[1]),1)])))),128))])):(0,e.kq)("",!0),w.transactions?.length>0?((0,e.wg)(),(0,e.iD)("div",c,[u,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.uniquePlants,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"transactions",key:t},[(0,e._)("p",null,(0,n.zw)(t[0]),1),(0,e._)("p",null,(0,n.zw)(t[1]),1)])))),128))])):(0,e.kq)("",!0),w.transactions?.length>0?((0,e.wg)(),(0,e.iD)("div",d,[h,((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.past5DaysSales,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"transactions",key:t._id},[(0,e._)("p",null,(0,n.zw)(t[0]),1),(0,e._)("p",null,(0,n.zw)(t[1])+" $",1)])))),128))])):(0,e.kq)("",!0)])])}var f={name:"StatsView",async created(){await this.$store.dispatch({type:"loadTransactions"})},methods:{countProducts(t){const s={};for(const a of t)s[a]?s[a]+=1:s[a]=1;return s},sortByName(t,s){Object.keys(t).forEach((a=>{let e=s.find((t=>t._id===a)),n=e.title;t[n]=t[a],delete t[a]}));let a=[];for(var e in t)a.push([e,t[e]]);return a.sort(((t,s)=>s[1]-t[1])),a.length>5&&(a=a.slice(0,5)),a},filter5days(){let t=new Date;return t.setDate(t.getDate()-5),this.transactions.filter((s=>Date.parse(s.date)>Date.parse(t)))}},computed:{transactions(){return this.$store.getters.transactions},uniquePlants(){let t=this.filter5days();t=t.map((t=>t.productsIds)).flat();let s=[];this.transactions.forEach((t=>{t.products.forEach((t=>s.push(t)))}));let a=this.countProducts(t),e=this.sortByName(a,s);return e},topSoldPlants(){let t=[];this.transactions.forEach((s=>{s.products.forEach((s=>t.push(s)))}));let s=t.map((t=>t._id)),a=this.countProducts(s),e=this.sortByName(a,t);return e},past5DaysSales(){let t=this.filter5days();const s={};for(const n of t)s[n.formattedDate]?s[n.formattedDate]+=n.total:s[n.formattedDate]=n.total;let a=[];for(var e in s)a.push([e,s[e]]);return a}}},w=a(89);const D=(0,w.Z)(f,[["render",p]]);var y=D}}]);
//# sourceMappingURL=about.afba7196.js.map