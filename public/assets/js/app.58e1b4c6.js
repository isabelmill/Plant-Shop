(function(){"use strict";var t={7589:function(t,n,e){var a=e(9242),r=e(3396);function o(t,n,e,a,o,s){const c=(0,r.up)("app-header"),i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c),(0,r.Wm)(i)],64)}var s=e(7139);const c={class:"app-header"},i={key:0,class:"nav-modal"},l={class:"content"},u=(0,r.Uk)("HOME"),d=(0,r.Uk)("STATS"),p=(0,r.Uk)("ADMIN"),f=(0,r._)("div",{class:"logo"},[(0,r._)("img",{src:"https://res.cloudinary.com/dw85wdwsw/image/upload/v1658149893/Portfolio/wjjzokfmoonrxd0gb0zo.png",alt:""}),(0,r.Uk)(" The Garden ")],-1),h=(0,r.Uk)("HOME"),m=(0,r.Uk)("STATS"),v=(0,r.Uk)("ADMIN"),g={class:"shopping-cart"},w={class:"dropbtn"},y=(0,r._)("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[(0,r._)("path",{d:"M7 22q-.825 0-1.412-.587Q5 20.825 5 20q0-.825.588-1.413Q6.175 18 7 18t1.412.587Q9 19.175 9 20q0 .825-.588 1.413Q7.825 22 7 22Zm10 0q-.825 0-1.412-.587Q15 20.825 15 20q0-.825.588-1.413Q16.175 18 17 18t1.413.587Q19 19.175 19 20q0 .825-.587 1.413Q17.825 22 17 22ZM6.15 6l2.4 5h7l2.75-5ZM5.2 4h14.75q.675 0 .925.5t-.025 1.05l-3.55 6.4q-.275.5-.725.775-.45.275-1.025.275H8.1L7 15h12v2H7q-1.125 0-1.7-.988-.575-.987-.05-1.962L6.6 11.6 3 4H1V2h3.25Zm3.35 7h7Z"})],-1),_={class:"mq-nav"},b=(0,r._)("path",{d:"M5 30v-2.792h30V30Zm0-8.625v-2.75h30v2.75Zm0-8.583V10h30v2.792Z"},null,-1),P=[b],k={key:0,class:"dropdown-content"},T={class:"products"},O={class:"total"},E=(0,r._)("p",null,"Total: ",-1);function q(t,n,e,a,o,b){const q=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("section",c,[o.isOpen?((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[(0,r.Wm)(q,{to:"/"},{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(q,{to:"/stats"},{default:(0,r.w5)((()=>[d])),_:1}),(0,r.Wm)(q,{to:"/admin"},{default:(0,r.w5)((()=>[p])),_:1})])])):(0,r.kq)("",!0),f,(0,r._)("nav",null,[(0,r.Wm)(q,{to:"/"},{default:(0,r.w5)((()=>[h])),_:1}),(0,r.Wm)(q,{to:"/stats"},{default:(0,r.w5)((()=>[m])),_:1}),(0,r.Wm)(q,{to:"/admin"},{default:(0,r.w5)((()=>[v])),_:1})]),(0,r._)("div",g,[(0,r._)("button",w,[y,(0,r.Uk)(" "+(0,s.zw)(b.cartProducts.length),1)]),(0,r._)("div",_,[((0,r.wg)(),(0,r.iD)("svg",{onClick:n[0]||(n[0]=t=>b.openNav()),xmlns:"http://www.w3.org/2000/svg",fill:"",height:"40",width:"40"},P))]),b.cartProducts.length>0?((0,r.wg)(),(0,r.iD)("div",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(b.cartProducts,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"cart-products",key:t},[(0,r._)("div",T,[(0,r._)("p",null,(0,s.zw)(t.title),1),(0,r._)("p",null,(0,s.zw)(t.price)+" $",1)])])))),128)),(0,r._)("div",O,[E,(0,r._)("p",null,(0,s.zw)(b.cartTotal)+" $",1)]),(0,r._)("button",{onClick:n[1]||(n[1]=(...t)=>b.pay&&b.pay(...t))},"Checkout")])):(0,r.kq)("",!0)])])}var D={name:"app-header",data(){return{isOpen:!1}},methods:{pay(){this.$store.dispatch({type:"pay",cart:this.cartProducts,total:this.cartTotal})},openNav(){this.isOpen=!this.isOpen},closeNav(){this.isOpen=!1}},computed:{cartProducts(){return this.$store.getters.cart},cartTotal(){return this.$store.getters.cartTotal}}},S=e(89);const C=(0,S.Z)(D,[["render",q]]);var j=C,$={name:"app",async created(){await this.$store.dispatch({type:"loadPlants"})},methods:{},components:{appHeader:j}};const M=(0,S.Z)($,[["render",o]]);var A=M,H=e(678);const U={class:"home"},Z={class:"plants-home"},x={class:"plant-img"},z=["src"],N={class:"img-on-hover"},Q={class:"price-cart"},R=["onClick"];function W(t,n,e,a,o,c){return(0,r.wg)(),(0,r.iD)("div",U,[(0,r._)("div",Z,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.plants,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"plant",key:t._id},[(0,r._)("div",x,[(0,r._)("img",{src:t.img,alt:""},null,8,z),(0,r._)("div",N,[(0,r._)("p",null,(0,s.zw)(t.description),1)])]),(0,r._)("h2",null,(0,s.zw)(t.title),1),(0,r._)("div",Q,[(0,r._)("h4",null,(0,s.zw)(t.price)+" USD",1),(0,r._)("button",{onClick:n=>c.buyPlant(t)},"+ Add To Cart",8,R)])])))),128))])])}var L={name:"HomeView",methods:{buyPlant(t){this.$store.commit({type:"addToCart",product:t})}},computed:{plants(){return this.$store.getters.plants}},components:{}};const I=(0,S.Z)(L,[["render",W]]);var G=I;const V=[{path:"/",name:"home",component:G},{path:"/stats",name:"stats",component:()=>e.e(443).then(e.bind(e,5285))},{path:"/admin",name:"admin",component:()=>e.e(328).then(e.bind(e,8690))}],Y=(0,H.p7)({history:(0,H.PO)("/"),routes:V});var F=Y,B=e(65),K=e(8466),J=e(3894);const X={query:tt,save:nt,makeTransaction:et};async function tt(){try{return await J.R.get("transaction")}catch(t){console.log("query err:",t)}}async function nt(t){try{return await J.R.post("transaction/",t)}catch(n){console.log("save err:",n)}}function et(t,n){let e=t.map((t=>t._id)),a={date:new Date(Date.now()).toString(),formattedDate:at(),products:t,productsIds:[...new Set(e)],total:n};return a}function at(){let t=new Date,n=String(t.getDate()).padStart(2,"0"),e=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return t=n+"."+e+"."+a,t}var rt=(0,B.MT)({state:{plants:null,allPlants:null,transactions:null,cart:[]},getters:{plants(t){return t.plants},allPlants(t){return t.allPlants},transactions(t){return t.transactions},cart(t){return t.cart},cartLength(t){return t.cart.length},cartTotal({cart:t}){return t.reduce(((t,n)=>t+n.price),0)},mostSold(t){return t.transactions}},mutations:{setTransactions(t,{transactions:n}){t.transactions=n},setPlants(t,{plants:n}){t.plants=n},setAllPlants(t,{plants:n}){t.allPlants=n},removePlant(t,{id:n}){const e=t.plants.findIndex((t=>t._id===n));t.plants.splice(e,1)},savePlant(t,{plant:n}){const e=t.plants.findIndex((t=>t._id===n._id));-1!==e?t.plants.splice(e,1,n):t.plants.push(n)},addToCart(t,{product:n}){t.cart.unshift(n)},clearCart(t){t.cart=[]}},actions:{async loadPlants({commit:t}){try{let n=await K.P.query();t({type:"setPlants",plants:n})}catch(n){console.log("Error cant load plants")}},async loadTransactions({commit:t}){try{let n=await X.query();t({type:"setTransactions",transactions:n})}catch(n){console.log("Error cant load transactions")}},async removePlant({commit:t},{id:n}){try{await K.P.remove(n),t({type:"removePlant",id:n})}catch(e){console.log("Error cant remove plant")}},async savePlant({commit:t},{plant:n}){try{await K.P.save(n),t({type:"savePlant",plant:n})}catch(e){console.log("Error cant save plant")}},async pay({commit:t},{cart:n,total:e}){try{let a=X.makeTransaction(n,e);await X.save(a),t({type:"clearCart"})}catch(a){console.log("Error cant update transaction")}}},modules:{}});(0,a.ri)(A).use(rt).use(F).mount("#app")},3894:function(t,n,e){e.d(n,{R:function(){return c}});var a=e(6265),r=e.n(a);const o="/api/";console.log("BASE_URL:",o);var s=r().create({withCredentials:!0});const c={get(t,n){return i(t,"GET",n)},post(t,n){return i(t,"POST",n)},put(t,n){return i(t,"PUT",n)},delete(t,n){return i(t,"DELETE",n)}};async function i(t,n="GET",e=null){try{const a=await s({url:`${o}${t}`,method:n,data:e,params:"GET"===n?e:null});return a.data}catch(a){throw console.log(`Had Issues ${n}ing to the backend, endpoint: ${t}, with data:`,e),console.dir(a),a}}},8466:function(t,n,e){e.d(n,{P:function(){return r}});var a=e(3894);const r={query:o,save:c,remove:s,getEmptyPlant:i};async function o(){try{return await a.R.get("plant")}catch(t){console.log("query err:",t)}}async function s(t){try{return await a.R["delete"](`plant/${t}`)}catch(n){console.log("remove err:",n)}}async function c(t){try{return t._id?await a.R.put(`plant/${t._id}`,t):await a.R.post("plant/",t)}catch(n){console.log("save err:",n)}}function i(){return{title:"",price:"",description:"",img:""}}}},n={};function e(a){var r=n[a];if(void 0!==r)return r.exports;var o=n[a]={exports:{}};return t[a](o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(n,a,r,o){if(!a){var s=1/0;for(u=0;u<t.length;u++){a=t[u][0],r=t[u][1],o=t[u][2];for(var c=!0,i=0;i<a.length;i++)(!1&o||s>=o)&&Object.keys(e.O).every((function(t){return e.O[t](a[i])}))?a.splice(i--,1):(c=!1,o<s&&(s=o));if(c){t.splice(u--,1);var l=r();void 0!==l&&(n=l)}}return n}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,r,o]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}}(),function(){e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,a){return e.f[a](t,n),n}),[]))}}(),function(){e.u=function(t){return"assets/js/"+{328:"admin",443:"about"}[t]+"."+{328:"db159f58",443:"afba7196"}[t]+".js"}}(),function(){e.miniCssF=function(t){}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={},n="front-end:";e.l=function(a,r,o,s){if(t[a])t[a].push(r);else{var c,i;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==n+o){c=d;break}}c||(i=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,e.nc&&c.setAttribute("nonce",e.nc),c.setAttribute("data-webpack",n+o),c.src=a),t[a]=[r];var p=function(n,e){c.onerror=c.onload=null,clearTimeout(f);var r=t[a];if(delete t[a],c.parentNode&&c.parentNode.removeChild(c),r&&r.forEach((function(t){return t(e)})),n)return n(e)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),i&&document.head.appendChild(c)}}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){e.p="/"}(),function(){var t={143:0};e.f.j=function(n,a){var r=e.o(t,n)?t[n]:void 0;if(0!==r)if(r)a.push(r[2]);else{var o=new Promise((function(e,a){r=t[n]=[e,a]}));a.push(r[2]=o);var s=e.p+e.u(n),c=new Error,i=function(a){if(e.o(t,n)&&(r=t[n],0!==r&&(t[n]=void 0),r)){var o=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;c.message="Loading chunk "+n+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,r[1](c)}};e.l(s,i,"chunk-"+n,n)}},e.O.j=function(n){return 0===t[n]};var n=function(n,a){var r,o,s=a[0],c=a[1],i=a[2],l=0;if(s.some((function(n){return 0!==t[n]}))){for(r in c)e.o(c,r)&&(e.m[r]=c[r]);if(i)var u=i(e)}for(n&&n(a);l<s.length;l++)o=s[l],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(u)},a=self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(7589)}));a=e.O(a)})();
//# sourceMappingURL=app.58e1b4c6.js.map